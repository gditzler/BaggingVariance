clc;
clear;
close all;

addpath('data/')
datas = {
         %'abalone', ... 
         %'cars', ...    
         %'covtype', ... 
         %'ecoli' ...
         %'glass', ...
         %'letter', ...
         'mnist', ...
         %'ocr', ...
         %'poker', ... 
         %'satimage', ...
         %'weld', ...
         %'wine'
         };

% set up the parameters of the experiment
model.type = 'CART'; 
params.n_classifiers = 100 ;
params.bootstraps = 50;
params.fraction = 1;
params.rf = .5;

delete(gcp('nocreate'))
parpool(5);

for d = 1:length(datas)
  disp(['Running ', datas{d}]);
  fname = ['results/',datas{d},'_n', num2str(params.n_classifiers),'_b', ...
    num2str(params.bootstraps),'_rf', num2str(100*params.rf), '_f', ...
    num2str(100*params.fraction), '.mat'];
  load(datas{d});
  try
   basic_experiment(data, labels, params, fname)
  catch 
   disp(['Error on ', datas{d}]);
  end
end